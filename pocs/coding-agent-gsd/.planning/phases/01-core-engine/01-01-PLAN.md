# Plan 01-01: Canvas Setup & Rendering Foundation

---
wave: 1
depends_on: []
files_modified:
  - index.html
  - css/game.css
  - js/render.js
  - js/board.js
autonomous: true
---

## Objective

Set up the HTML5 Canvas with high-DPI support and create the rendering foundation for the Tetris grid.

## Requirements Addressed

- TECH-01: HTML5 Canvas for rendering
- TECH-04: No external dependencies (vanilla JS)
- TECH-05: Canvas renders crisp on high-DPI displays
- CORE-01: Game displays 10-column, 20-row grid on canvas

## Tasks

<task id="1">
Create index.html with canvas element and script imports.

Structure:
- DOCTYPE html
- Head with viewport meta, title, link to game.css
- Body with canvas id="game" and script imports (board.js, render.js, main.js in order)
- No external dependencies
</task>

<task id="2">
Create css/game.css with canvas styling.

Requirements:
- Center canvas on page
- Dark background for game area
- Remove default margins/padding on body
- Canvas should have subtle border or shadow
</task>

<task id="3">
Create js/board.js with board state management.

Implement:
- COLS = 10, ROWS = 20 constants
- CELL_SIZE = 30 constant
- board array: 2D array (ROWS x COLS), null = empty, string = color
- createBoard() function returns empty 2D array
- Export/expose: COLS, ROWS, CELL_SIZE, createBoard
</task>

<task id="4">
Create js/render.js with canvas rendering.

Implement:
- Get canvas and context references
- setupCanvas() function:
  - Apply devicePixelRatio scaling for high-DPI
  - Set canvas dimensions (COLS * CELL_SIZE, ROWS * CELL_SIZE)
  - Scale context appropriately
- drawGrid() function:
  - Clear canvas
  - Draw background
  - Draw grid lines (subtle color)
- drawBoard(board) function:
  - Iterate board array
  - Draw filled cells with their color
- Export/expose: setupCanvas, drawGrid, drawBoard
</task>

<task id="5">
Create js/main.js entry point.

Implement:
- DOMContentLoaded listener
- Call setupCanvas()
- Create board with createBoard()
- Call drawGrid() and drawBoard(board) to verify rendering
- Add temporary test: set a few cells to colors and redraw
</task>

## Verification

```
- [ ] index.html loads without errors in browser console
- [ ] Canvas displays centered on page
- [ ] Grid is visible with 10 columns and 20 rows
- [ ] Canvas is crisp on high-DPI display (no blur)
- [ ] Test cells render in correct positions with colors
- [ ] No external dependencies loaded
```

## Must Haves

1. Canvas renders at correct size (300x600 logical pixels)
2. High-DPI scaling works (check on Retina display or via devtools device emulation)
3. Grid cells are clearly delineated
4. Empty board renders without errors
