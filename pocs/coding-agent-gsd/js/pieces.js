const PIECES = {
    I: {
        name: 'I',
        color: '#00f0f0',
        shapes: [
            [[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],
            [[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],
            [[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],
            [[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]
        ]
    },
    O: {
        name: 'O',
        color: '#f0f000',
        shapes: [
            [[1,1],[1,1]],
            [[1,1],[1,1]],
            [[1,1],[1,1]],
            [[1,1],[1,1]]
        ]
    },
    T: {
        name: 'T',
        color: '#a000f0',
        shapes: [
            [[0,1,0],[1,1,1],[0,0,0]],
            [[0,1,0],[0,1,1],[0,1,0]],
            [[0,0,0],[1,1,1],[0,1,0]],
            [[0,1,0],[1,1,0],[0,1,0]]
        ]
    },
    S: {
        name: 'S',
        color: '#00f000',
        shapes: [
            [[0,1,1],[1,1,0],[0,0,0]],
            [[0,1,0],[0,1,1],[0,0,1]],
            [[0,0,0],[0,1,1],[1,1,0]],
            [[1,0,0],[1,1,0],[0,1,0]]
        ]
    },
    Z: {
        name: 'Z',
        color: '#f00000',
        shapes: [
            [[1,1,0],[0,1,1],[0,0,0]],
            [[0,0,1],[0,1,1],[0,1,0]],
            [[0,0,0],[1,1,0],[0,1,1]],
            [[0,1,0],[1,1,0],[1,0,0]]
        ]
    },
    J: {
        name: 'J',
        color: '#0000f0',
        shapes: [
            [[1,0,0],[1,1,1],[0,0,0]],
            [[0,1,1],[0,1,0],[0,1,0]],
            [[0,0,0],[1,1,1],[0,0,1]],
            [[0,1,0],[0,1,0],[1,1,0]]
        ]
    },
    L: {
        name: 'L',
        color: '#f0a000',
        shapes: [
            [[0,0,1],[1,1,1],[0,0,0]],
            [[0,1,0],[0,1,0],[0,1,1]],
            [[0,0,0],[1,1,1],[1,0,0]],
            [[1,1,0],[0,1,0],[0,1,0]]
        ]
    }
};

const PIECE_TYPES = ['I', 'O', 'T', 'S', 'Z', 'J', 'L'];

const WALL_KICKS = {
    JLSTZ: {
        '0>1': [[0,0], [-1,0], [-1,1], [0,-2], [-1,-2]],
        '1>0': [[0,0], [1,0], [1,-1], [0,2], [1,2]],
        '1>2': [[0,0], [1,0], [1,-1], [0,2], [1,2]],
        '2>1': [[0,0], [-1,0], [-1,1], [0,-2], [-1,-2]],
        '2>3': [[0,0], [1,0], [1,1], [0,-2], [1,-2]],
        '3>2': [[0,0], [-1,0], [-1,-1], [0,2], [-1,2]],
        '3>0': [[0,0], [-1,0], [-1,-1], [0,2], [-1,2]],
        '0>3': [[0,0], [1,0], [1,1], [0,-2], [1,-2]]
    },
    I: {
        '0>1': [[0,0], [-2,0], [1,0], [-2,-1], [1,2]],
        '1>0': [[0,0], [2,0], [-1,0], [2,1], [-1,-2]],
        '1>2': [[0,0], [-1,0], [2,0], [-1,2], [2,-1]],
        '2>1': [[0,0], [1,0], [-2,0], [1,-2], [-2,1]],
        '2>3': [[0,0], [2,0], [-1,0], [2,1], [-1,-2]],
        '3>2': [[0,0], [-2,0], [1,0], [-2,-1], [1,2]],
        '3>0': [[0,0], [1,0], [-2,0], [1,-2], [-2,1]],
        '0>3': [[0,0], [-1,0], [2,0], [-1,2], [2,-1]]
    }
};

function getWallKicks(pieceType, fromRotation, toRotation) {
    const key = fromRotation + '>' + toRotation;
    if (pieceType === 'I') {
        return WALL_KICKS.I[key] || [[0,0]];
    }
    return WALL_KICKS.JLSTZ[key] || [[0,0]];
}
